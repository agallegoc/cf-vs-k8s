Simple deployment

kubectl run simpleweb --image=simpleweb:v0.1
deployment "simpleweb" created

Logs

kubectl get pods
NAME                            READY     STATUS    RESTARTS   AGE
simpleweb-67f4b46f46-w27qk      1/1       Running   0          4m

kubectl logs simpleweb-67f4b46f46-w27qk

...
2018-03-23 20:09:30.217  INFO 1 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat started on port(s): 8080 (http) with context path ''
2018-03-23 20:09:30.223  INFO 1 --- [           main] d.m.SimpleWeb.SimpleWebApplication       : Started SimpleWebApplication in 5.2 seconds (JVM running for 5.837)

Expose deployment as service

kubectl expose deployment simpleweb --type=LoadBalancer --name=simpleweb-lb --port 8080
service "simpleweb-lb" exposed

kubectl get services
NAME           TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE
simpleweb-lb   LoadBalancer   10.100.145.27    localhost     8080:31468/TCP   52s

Access deployment todo

Use config file

apiVersion: v1
kind: Pod
metadata:
  name: simpleweb-pod
spec:
  containers:
    - name: simpleweb
      image: simpleweb:v0.1
      ports:
        - containerPort: 9080
          name: http
          protocol: TCP

kubectl port-forward simpleweb-pod 8080:8080
Forwarding from 127.0.0.1:8080 -> 8080

curl 127.0.0.1:8080/hello
simpleweb-pod: Hello, bootiful World!

Remove the pod and redeploy with liveness probe

  containers:
    - name: simpleweb
      image: simpleweb:v0.1
      livenessProbe:
        httpGet:
          path: /actuator/health
          port: 8080
        initialDelaySeconds: 5
        timeoutSeconds: 1
        periodSeconds: 2
        failureThreshold: 2
        
End of pods

